# Voice Module Environment Configuration

# Kimi Model Settings
KIMI_MODEL_PATH=moonshotai/Kimi-Audio-7B-Instruct
KIMI_DEVICE=cpu
KIMI_LOAD_IN_4BIT=true

# Voice Provider Configuration
VOICE_STT_PROVIDER=kimi,openai  # Use Kimi first, fallback to OpenAI
VOICE_TTS_PROVIDER=kimi,openai  # Use Kimi first, fallback to OpenAI
VOICE_LANGUAGE=en
VOICE_MAX_RESPONSE_LENGTH=500
VOICE_ENABLE_FOLLOW_UPS=true
VOICE_CONVERSATION_TIMEOUT=300

# Resilience & Error Handling
VOICE_ENABLE_RETRY=true
VOICE_MAX_RETRIES=3
VOICE_ENABLE_CIRCUIT_BREAKER=true
VOICE_CIRCUIT_BREAKER_THRESHOLD=5

# Provider Fallback
VOICE_PROVIDER_FALLBACK_ENABLED=true
VOICE_FALLBACK_MODE=health_based

# Performance
VOICE_ENABLE_CACHING=true
VOICE_CACHE_TTL=3600
VOICE_ENABLE_RATE_LIMITING=true
VOICE_RATE_LIMIT_PER_MINUTE=60

# Session Persistence (Optional)
VOICE_REDIS_SESSIONS=false
# VOICE_REDIS_URL=redis://localhost:6379

# Monitoring
VOICE_ENABLE_METRICS=true
VOICE_ENABLE_PROMETHEUS=false
VOICE_METRICS_PORT=9090

# =============================================================================
# MULTIMODAL / VISION RAG CONFIGURATION
# =============================================================================

# Feature Flags
ENABLE_VISION_RAG=true           # Enable image/PDF processing
ENABLE_VIDEO_RAG=true            # Enable video processing
ENABLE_AUDIO_RAG=true            # Enable audio transcription

# File Size Limits (in MB)
MAX_IMAGE_SIZE_MB=10
MAX_VIDEO_SIZE_MB=100
MAX_AUDIO_SIZE_MB=50
MAX_PDF_SIZE_MB=20

# Video Processing
VIDEO_FRAME_COUNT=10             # Number of frames to extract
VIDEO_FRAME_STRATEGY=fixed_interval  # fixed_interval, keyframes
VIDEO_EXTRACT_AUDIO=true         # Extract audio from videos

# Audio Processing (Whisper)
AUDIO_LANGUAGE=                  # Leave empty for auto-detect
AUDIO_MODEL=whisper-1            # OpenAI model or local model name
AUDIO_USE_LOCAL_FALLBACK=true    # Use local Whisper if API fails

# Storage
MULTIMODAL_STORAGE_BACKEND=database  # database or memory
ASSET_EXPIRY_HOURS=24
CLEANUP_INTERVAL_HOURS=1

# OCR Settings
OCR_PROVIDER=tesseract           # tesseract, easyocr, paddleocr
OCR_LANGUAGES=en                 # Comma-separated language codes

# Embedding
EMBEDDING_MODEL=cohere-embed-4
EMBEDDING_BATCH_SIZE=10

# Resilience
ENABLE_CIRCUIT_BREAKER=true
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT_SECONDS=60.0
MAX_RETRIES=3
RETRY_BASE_DELAY=1.0

# Performance
MAX_CONCURRENT_PROCESSING=5
PROCESSING_TIMEOUT_SECONDS=300.0
CACHE_EMBEDDINGS=true

